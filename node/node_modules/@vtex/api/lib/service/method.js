"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ramda_1 = require("ramda");
const compose_1 = require("./utils/compose");
function method(options) {
    const handlers = ramda_1.mapObjIndexed(handler => compose_1.compose(Array.isArray(handler) ? handler : [handler]), options);
    return async (ctx, next) => {
        const verb = ctx.method.toUpperCase();
        const handler = handlers[verb] || handlers.DEFAULT;
        if (handler) {
            await handler(ctx);
        }
        await next();
    };
}
exports.method = method;
